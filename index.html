<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Rock Paper Scissors</title>
</head>
<body>
    

    Human Score: <p id="humanScore"></p>
    Computer Score: <p id="compScore"></p>

    <p id="demo"></p>

    <p id="newGame"></p>

    <div class="keys">
        <div data-key="65" id="rockButton">
            <kbd>ROCK</kbd>
            <span class="sound">Q</span>
        </div>
        <div data-key="65" id="paperButton">
            <kbd>PAPER</kbd>
            <span class="sound">W</span>
        </div>
        <div data-key="65" id="scissorsButton">
            <kbd>SCISSORS</kbd>
            <span class="sound">E</span>
        </div>
    </div> 



<script>

    let playerSelection 
    let computerSelection 
    let winCount = 0;
    let lossCount = 0;

    document.getElementById("humanScore").innerHTML = winCount;
    document.getElementById("compScore").innerHTML = lossCount;
    document.getElementById("demo").innerHTML = 'Care to play the game of champions? Make a choice!'

    const rockButt = document.getElementById("rockButton");
    rockButt.addEventListener("click", rockClick);
    function rockClick() {
        document.getElementById("demo").innerHTML = "rock clicked";
        playerSelection='rock';
        playRound();
    }

    const paperButt = document.getElementById("paperButton");
    paperButt.addEventListener("click", paperClick);
    function paperClick() {
        document.getElementById("demo").innerHTML = "paper clicked";
        playerSelection='paper';
        playRound();
    } 

    const scissorsButt = document.getElementById("scissorsButton");
    scissorsButt.addEventListener("click", scissorsClick);
    function scissorsClick() {
        document.getElementById("demo").innerHTML = "scissors clicked";
        playerSelection='scissors';
        playRound();
    }

    function computerPlay() {       // picks a random number to assign RPS to computerSelection
        let chance = Math.random();
        if (chance < .333) {
                computerSelection = 'rock';
            } else if (.333 <= chance && chance < .666) {
                computerSelection = 'paper';
            } else {
                computerSelection = 'scissors'
            }
             }

    function playRound() {      // gets values for Player and Computer choices and determines winner, gives message and adjusts wins/losses
        computerPlay();
        if (playerSelection == computerSelection) {
            document.getElementById("demo").innerHTML = playerSelection + ' vs. ' + computerSelection +  "Tie game!";
        } else if (playerSelection == 'rock' && computerSelection == 'scissors' || 
            playerSelection == 'paper' && computerSelection == 'rock' || playerSelection == 'scissors' && computerSelection == 'paper') {
            document.getElementById("demo").innerHTML = playerSelection + ' vs. ' + computerSelection + 'You Win! Nice!';
            winCount++;
            document.getElementById("humanScore").innerHTML = winCount;
       } else {
            document.getElementById("demo").innerHTML = playerSelection + ' vs. ' + computerSelection + 'You Lose!';
            lossCount++;
            document.getElementById("compScore").innerHTML = lossCount;
        } 

        if (winCount === 5) {
            removeListener();
            document.getElementById("demo").innerHTML = 'Humans win! Computers are losers!';
        } else if (lossCount === 5) {
            removeListener();
            document.getElementById("demo").innerHTML = 'Computers win! Prepare to be assimilated!';
        }
    }

    function removeListener() {
        rockButton.removeEventListener("click", rockClick);
        scissorsButton.removeEventListener("click", scissorsClick);
        paperButton.removeEventListener("click", paperClick);
        document.getElementById("newGame").innerHTML = '<p id=newGameButton>New Game?</p>';
        const gameNew = document.getElementById('newGameButton');
        gameNew.addEventListener("click", newGameClick);
    }



    function newGameClick() {
        winCount = 0;
        lossCount = 0;
        document.getElementById("compScore").innerHTML = lossCount;
        document.getElementById("humanScore").innerHTML = winCount;
        document.getElementById("demo").innerHTML = 'Prepare to battle again!'
        rockButton.addEventListener("click", rockClick);
        scissorsButton.addEventListener("click", scissorsClick);
        paperButton.addEventListener("click", paperClick);
    }

 
    function theGame() {    // plays 5 rounds and and announces winner at the end
        for (let i = 0; i < 5; i++) {
            playRound();
            alert('Player wins: ' + winCount + '\n Computer Wins: ' + lossCount);
        }
        if (winCount > lossCount) {
            alert('You win the series with ' + winCount + ' wins!');
        } else {
            alert('You lose the series with ' + lossCount + ' losses!');
        }
    }

    

</script>

    
</body>
</html>